<div class="dashboard-container">
  <!-- Sidebar (same as Department Management) -->
  <aside class="sidebar" [class.collapsed]="isSidebarCollapsed">
    <div class="sidebar-header">
      <img *ngIf="!isSidebarCollapsed" src="assets/logo.png" alt="iDUELA" class="logo" />
      <img *ngIf="isSidebarCollapsed" src="assets/logo.png" alt="iDUELA" class="logo-small" />
    </div>
    
    <nav class="sidebar-nav">
      <div class="nav-section">
        <div class="section-title" *ngIf="!isSidebarCollapsed">Home</div>
        <div class="nav-item" (click)="navigateToDashboard()">
          <span class="nav-icon"><i class="fas fa-chart-line"></i></span>
          <span class="nav-text" *ngIf="!isSidebarCollapsed">Dashboard</span>
        </div>
        <div class="nav-item" (click)="navigateToPlanning()">
          <span class="nav-icon"><i class="fas fa-tasks"></i></span>
          <span class="nav-text" *ngIf="!isSidebarCollapsed">Planning</span>
        </div>
        <div class="nav-item" (click)="navigateToScoreCards()">
          <span class="nav-icon"><i class="fas fa-clipboard-check"></i></span>
          <span class="nav-text" *ngIf="!isSidebarCollapsed">Score Cards</span>
        </div>
        <div class="nav-item" (click)="navigateToEvaluation()">
          <span class="nav-icon"><i class="fas fa-star"></i></span>
          <span class="nav-text" *ngIf="!isSidebarCollapsed">Evaluation</span>
        </div>
      </div>

      <div class="nav-section">
        <div class="section-title" *ngIf="!isSidebarCollapsed">Analytics</div>
        <div class="nav-item" (click)="navigateToReports()">
          <span class="nav-icon"><i class="fas fa-chart-bar"></i></span>
          <span class="nav-text" *ngIf="!isSidebarCollapsed">Reports</span>
        </div>
      </div>

      <div class="nav-section">
        <div class="section-title" *ngIf="!isSidebarCollapsed">Settings</div>
        <div class="nav-item" (click)="navigateToManagement()">
          <span class="nav-icon"><i class="fas fa-cogs"></i></span>
          <span class="nav-text" *ngIf="!isSidebarCollapsed">Management</span>
        </div>
        <div class="nav-item" (click)="navigateToReviewPeriod()">
          <span class="nav-icon"><i class="fas fa-calendar-alt"></i></span>
          <span class="nav-text" *ngIf="!isSidebarCollapsed">Review Periods</span>
        </div>
      </div>
      
      <div class="nav-spacer"></div>
      
      <div class="nav-item sign-out" (click)="signOut()">
        <span class="nav-icon"><i class="fas fa-sign-out-alt"></i></span>
        <span class="nav-text" *ngIf="!isSidebarCollapsed">Sign Out</span>
      </div>
    </nav>
  </aside>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Top Bar -->
    <header class="top-bar">
      <button class="sidebar-toggle" (click)="toggleSidebar()">
        <i class="fas fa-bars"></i>
      </button>
      <div class="page-name">Performance Management System</div>
    </header>

    <!-- Page Content -->
    <div class="page-content">
      <!-- Page Header -->
      <div class="page-header">
        <div class="header-left">
          <button class="btn-back" (click)="navigateToManagement()">
            <i class="fas fa-arrow-left"></i>
            <span>Back to Management</span>
          </button>
          <h1 class="page-title">Position Management</h1>
        </div>
        <button class="btn-add" (click)="openAddModal()">
          <i class="fas fa-plus"></i>
          <span>Add Position</span>
        </button>
      </div>

      <!-- Position Table -->
      <div class="table-card">
        <table class="data-table">
          <thead>
            <tr>
              <th>S.No</th>
              <th>Position Title</th>
              <th>Department</th>
              <th>Grade Level</th>
              <th>Employees</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let position of positions; let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ position.title }}</td>
              <td>{{ position.department }}</td>
              <td>{{ position.gradeLevel }}</td>
              <td>{{ position.employeeCount }}</td>
              <td>
                <div class="action-buttons">
                  <button class="btn-icon btn-edit" (click)="openEditModal(position)" title="Edit">
                    <i class="fas fa-pencil"></i>
                  </button>
                  <button class="btn-icon btn-delete" (click)="deletePosition(position.id)" title="Delete">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- Add/Edit Position Modal -->
<div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
  <div class="modal-container" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2 class="modal-title">{{ isEditMode ? 'Edit Position' : 'Add Position' }}</h2>
      <button class="btn-close" (click)="closeModal()">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <div class="modal-body">
      <form (ngSubmit)="savePosition()">
        <div class="form-group">
          <label class="form-label">Position Title <span class="required">*</span></label>
          <input 
            type="text" 
            class="form-control" 
            [(ngModel)]="positionForm.title"
            name="title"
            placeholder="Enter position title"
            required
          />
        </div>

        <div class="form-group">
          <label class="form-label">Department <span class="required">*</span></label>
          <select class="form-control" [(ngModel)]="positionForm.department" name="department" required>
            <option value="">Select Department</option>
            <option *ngFor="let dept of departments" [value]="dept">
              {{ dept }}
            </option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">Grade Level <span class="required">*</span></label>
          <select class="form-control" [(ngModel)]="positionForm.gradeLevel" name="gradeLevel" required>
            <option value="">Select Grade Level</option>
            <option *ngFor="let grade of gradeLevels" [value]="grade">
              {{ grade }}
            </option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">Description</label>
          <textarea 
            class="form-control" 
            [(ngModel)]="positionForm.description"
            name="description"
            rows="3"
            placeholder="Enter position description"
          ></textarea>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn-cancel" (click)="closeModal()">Cancel</button>
          <button type="submit" class="btn-save">Save</button>
        </div>
      </form>
    </div>
  </div>
</div>





  <!-- Sidebar (same as Department Management) -->
  <aside class="sidebar" [class.collapsed]="isSidebarCollapsed">
    <div class="sidebar-header">
      <img *ngIf="!isSidebarCollapsed" src="assets/logo.png" alt="iDUELA" class="logo" />
      <img *ngIf="isSidebarCollapsed" src="assets/logo.png" alt="iDUELA" class="logo-small" />
    </div>
    
    <nav class="sidebar-nav">
      <div class="nav-section">
        <div class="section-title" *ngIf="!isSidebarCollapsed">Home</div>
        <div class="nav-item" (click)="navigateToDashboard()">
          <span class="nav-icon"><i class="fas fa-chart-line"></i></span>
          <span class="nav-text" *ngIf="!isSidebarCollapsed">Dashboard</span>
        </div>
        <div class="nav-item" (click)="navigateToPlanning()">
          <span class="nav-icon"><i class="fas fa-tasks"></i></span>
          <span class="nav-text" *ngIf="!isSidebarCollapsed">Planning</span>
        </div>
        <div class="nav-item" (click)="navigateToScoreCards()">
          <span class="nav-icon"><i class="fas fa-clipboard-check"></i></span>
          <span class="nav-text" *ngIf="!isSidebarCollapsed">Score Cards</span>
        </div>
        <div class="nav-item" (click)="navigateToEvaluation()">
          <span class="nav-icon"><i class="fas fa-star"></i></span>
          <span class="nav-text" *ngIf="!isSidebarCollapsed">Evaluation</span>
        </div>
      </div>

      <div class="nav-section">
        <div class="section-title" *ngIf="!isSidebarCollapsed">Analytics</div>
        <div class="nav-item" (click)="navigateToReports()">
          <span class="nav-icon"><i class="fas fa-chart-bar"></i></span>
          <span class="nav-text" *ngIf="!isSidebarCollapsed">Reports</span>
        </div>
      </div>

      <div class="nav-section">
        <div class="section-title" *ngIf="!isSidebarCollapsed">Settings</div>
        <div class="nav-item" (click)="navigateToManagement()">
          <span class="nav-icon"><i class="fas fa-cogs"></i></span>
          <span class="nav-text" *ngIf="!isSidebarCollapsed">Management</span>
        </div>
        <div class="nav-item" (click)="navigateToReviewPeriod()">
          <span class="nav-icon"><i class="fas fa-calendar-alt"></i></span>
          <span class="nav-text" *ngIf="!isSidebarCollapsed">Review Periods</span>
        </div>
      </div>
      
      <div class="nav-spacer"></div>
      
      <div class="nav-item sign-out" (click)="signOut()">
        <span class="nav-icon"><i class="fas fa-sign-out-alt"></i></span>
        <span class="nav-text" *ngIf="!isSidebarCollapsed">Sign Out</span>
      </div>
    </nav>
  </aside>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Top Bar -->
    <header class="top-bar">
      <button class="sidebar-toggle" (click)="toggleSidebar()">
        <i class="fas fa-bars"></i>
      </button>
      <div class="page-name">Performance Management System</div>
    </header>

    <!-- Page Content -->
    <div class="page-content">
      <!-- Page Header -->
      <div class="page-header">
        <div class="header-left">
          <button class="btn-back" (click)="navigateToManagement()">
            <i class="fas fa-arrow-left"></i>
            <span>Back to Management</span>
          </button>
          <h1 class="page-title">Position Management</h1>
        </div>
        <button class="btn-add" (click)="openAddModal()">
          <i class="fas fa-plus"></i>
          <span>Add Position</span>
        </button>
      </div>

      <!-- Position Table -->
      <div class="table-card">
        <table class="data-table">
          <thead>
            <tr>
              <th>S.No</th>
              <th>Position Title</th>
              <th>Department</th>
              <th>Grade Level</th>
              <th>Employees</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let position of positions; let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ position.title }}</td>
              <td>{{ position.department }}</td>
              <td>{{ position.gradeLevel }}</td>
              <td>{{ position.employeeCount }}</td>
              <td>
                <div class="action-buttons">
                  <button class="btn-icon btn-edit" (click)="openEditModal(position)" title="Edit">
                    <i class="fas fa-pencil"></i>
                  </button>
                  <button class="btn-icon btn-delete" (click)="deletePosition(position.id)" title="Delete">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

<!-- Add/Edit Position Modal -->
<div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
  <div class="modal-container" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2 class="modal-title">{{ isEditMode ? 'Edit Position' : 'Add Position' }}</h2>
      <button class="btn-close" (click)="closeModal()">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <div class="modal-body">
      <form (ngSubmit)="savePosition()">
        <div class="form-group">
          <label class="form-label">Position Title <span class="required">*</span></label>
          <input 
            type="text" 
            class="form-control" 
            [(ngModel)]="positionForm.title"
            name="title"
            placeholder="Enter position title"
            required
          />
        </div>

        <div class="form-group">
          <label class="form-label">Department <span class="required">*</span></label>
          <select class="form-control" [(ngModel)]="positionForm.department" name="department" required>
            <option value="">Select Department</option>
            <option *ngFor="let dept of departments" [value]="dept">
              {{ dept }}
            </option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">Grade Level <span class="required">*</span></label>
          <select class="form-control" [(ngModel)]="positionForm.gradeLevel" name="gradeLevel" required>
            <option value="">Select Grade Level</option>
            <option *ngFor="let grade of gradeLevels" [value]="grade">
              {{ grade }}
            </option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">Description</label>
          <textarea 
            class="form-control" 
            [(ngModel)]="positionForm.description"
            name="description"
            rows="3"
            placeholder="Enter position description"
          ></textarea>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn-cancel" (click)="closeModal()">Cancel</button>
          <button type="submit" class="btn-save">Save</button>
        </div>
      </form>
    </div>
  </div>









